pico-8 cartridge // http://www.pico-8.com
version 39
__lua__
--fireworks tootcart
--by jess telford
-- annotated version:
r=rnd
::_::
cls()
srand()
for i = 1, 20 do
  -- a number from 8-16, used to slow down the fireworks & size the explosion
  m = 8 + 8 * r()
  -- later used in sin(), and determines how far it moves horizontally before
  -- starting its decent along the sin curve
  q = (t() / m) % 1
  -- x position, based on frequency, then scaled out
  x = 64 + q * 256 * (r() - .5)
  -- amplitude ensures it reaches top 2/3rds of screen
  y = 128 + sin(q) * 64 * (r() + .8)
  -- we have two stages:
  -- 0: the firework is launching, for the upward curve of sin() (ie; 0 - 0.2)
  -- 1: the explosion, only on the downward curve of sin() (ie; 0.2 - 0.7)
  -- so we use sin() as a convenient way to determine which stage we're in
  -- .8 is shifting the sin curve by half to get the opposite sign
  -- an equivalent, longer version: s=q>.2 and q<.7 and 1 or -1
  s=sgn(sin(q+.8))
  -- render the launching firework
  -- negative numbers will not render anything, 0 will render a dot
  circ(x, y, s - 1, 7)
  -- the explosion lasts until it drops off the bottom of the screen, which is
  -- only .5 sin() iteration, so we normalise that to a range of 0 - 1
  -- note: `2 *` is the same as `/ 0.5`
  j = 2 * (q - .2)
  -- based on easeOutQuart, we rapidly ease the value toward its target, then
  -- scale it by the desired radius
  k = (1 - (1 - j) ^ 9) * m
  -- render dots around the circumference of the explosion circle
  for u = 0, 1, 0.1 do
    circfill(
      x + sin(u) * k,
      y + cos(u) * k,
      -- first radius -1 (don't render), then 1 (a cross), finally 0 (a dot).
      -- multiply by s to force a negative number so we don't render the
      -- explosion while the firework is still launching.
      -- ceil(sin()) gives us the 0 or 1.
      -- .9 is .4+.5 - shifting the sin curve by half to get the opposite sign,
      -- which allows us to use flr() instead of ceil() to save 1 character
      -- a longer version might be: q<.4 and 1 or 0
      s*flr(sin(q-.9)),
      -- pick from the bright colors to start, then later change to dark blue
      q>.45 and 1 or 8+i%8
    )
  end
end
flip()
goto _
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000009990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000900000900000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000009990000000009990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000900000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000008000000800000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000900088800000000008890000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000009990008000000000000999000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000900000000000000000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000080c00000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000c0009880000000c0000000090888000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000ccc09990000000ccc000000999080000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000c0009000000090c0000000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000900009000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000009990000000099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000c0000000008999000000000c990000080000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000ccc00000008889000009000ccc00000888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000c0000000098000000999000c009000080000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000009990000000900000099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000900000000000000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000008000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000088800000000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000c0000000000000800000000c000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000ccc00000009000000000008ccc09000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000c0000000999000000000888c099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000900000000000800009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000b0b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000bbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000c0000009000000c000900b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000ccc00009990009ccc0999bbb00000bbb000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000c000000c000999c000900b0000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000ccc000900000000b0000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000c000000000000bbb00000bbb000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000b0b000b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000bbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000bbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000b00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000aaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000a0000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000aaa00000000000aaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000a0000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000a0000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000aaa00000000000000000000aaa00000800000000000000000070000000000000000000000000000000000000000000000000000000000000
00000000000000000a0000000000000000000000a000008880000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000080000000800000080000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000888000000000000888000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000080000000000000080000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000
00000000000000000a0000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000aaa00000000000000000000aaa000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000
00000000000000000a0000000000000000080000a000000000000000008000000000000000000000000000000000000000000000bbb000000000000000000000
00000000000000000000000000000000008880000000000000000000088800000000000000000000000000000000000000b000000b000000b000000000000000
0000000000000000000000000000000000080000000000000000000000800000000000000000000000000000000000000bbb00000000000bbb00000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000000b000000000000000
000000000000000000000a0000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000aaa00000000000aaa0000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000a0000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000aaa0000080000000000000000000000800000000000000000000000000000000000b0000000000000000000000b0000000000
0000000000000000000000000000a0000088800000000000000000000888000000000000000000000000000000000bbb00000000000000000000bbb000000000
0000000000000000000000000000000000080000000000000000000000800000000000000000000000000000000000b0000000000000000000000b0000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000080000000000000080000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000088800000000000088800000000000000000000000000000000000000b0000000000000000000000b0000000000
000000000000000000000000000000000000000800000008000000800000000000000000000000000000000000000bbb00000000000000000000bbb000000000
0000000000000000000000000000000000000000000000888000000000000000000000000000000000000000000000b0000000000000000000000b0000000000
00000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000000b000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb00000000000bbb00000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000000b000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

